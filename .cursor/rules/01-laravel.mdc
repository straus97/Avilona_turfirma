# Laravel Development Rules

## üéØ –û–±—â–∏–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- –°–ª–µ–¥—É–π –ø—Ä–∏–Ω—Ü–∏–ø–∞–º MVC (Model-View-Controller)
- –ò—Å–ø–æ–ª—å–∑—É–π Service Layer –¥–ª—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏
- –ü—Ä–∏–º–µ–Ω—è–π Repository Pattern –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–∞–Ω–Ω—ã–º–∏
- –†–µ–∞–ª–∏–∑—É–π SOLID –ø—Ä–∏–Ω—Ü–∏–ø—ã

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
- –ú–æ–¥–µ–ª–∏ –≤ `app/Models/`
- –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã –≤ `app/Http/Controllers/`
- –°–µ—Ä–≤–∏—Å—ã –≤ `app/Services/`
- –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –≤ `app/Repositories/`
- Middleware –≤ `app/Http/Middleware/`
- Requests –≤ `app/Http/Requests/`

## üìù –ö–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ

### PHP —Å—Ç–∞–Ω–¥–∞—Ä—Ç—ã
- –°–ª–µ–¥—É–π PSR-12 —Å—Ç–∞–Ω–¥–∞—Ä—Ç—É –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è
- –ò—Å–ø–æ–ª—å–∑—É–π —Å—Ç—Ä–æ–≥—É—é —Ç–∏–ø–∏–∑–∞—Ü–∏—é (type hints)
- –ü—Ä–∏–º–µ–Ω—è–π DocBlock –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
- –ò–º–µ–Ω—É–π –º–µ—Ç–æ–¥—ã –≤ camelCase
- –ò–º–µ–Ω—É–π –∫–ª–∞—Å—Å—ã –≤ PascalCase

### Laravel –∫–æ–Ω–≤–µ–Ω—Ü–∏–∏
- –ò—Å–ø–æ–ª—å–∑—É–π Eloquent ORM –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–î
- –ü—Ä–∏–º–µ–Ω—è–π Laravel Collections
- –ò—Å–ø–æ–ª—å–∑—É–π Form Requests –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- –ü—Ä–∏–º–µ–Ω—è–π Resource Controllers
- –ò—Å–ø–æ–ª—å–∑—É–π Laravel Events –∏ Listeners

### –ü—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞

#### –ú–æ–¥–µ–ª—å
```php
<?php

namespace App\Models;

use Illuminate\Database\Eloquent\Model;
use Illuminate\Database\Eloquent\Relations\HasMany;

class Tour extends Model
{
    protected $fillable = [
        'title',
        'description',
        'price',
        'departure_city',
        'destination_country',
        'start_date',
        'end_date',
        'hotel_stars',
        'meal_type',
    ];

    protected $casts = [
        'start_date' => 'date',
        'end_date' => 'date',
        'price' => 'decimal:2',
    ];

    public function bookings(): HasMany
    {
        return $this->hasMany(Booking::class);
    }

    public function scopeActive($query)
    {
        return $query->where('is_active', true);
    }
}
```

#### –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä
```php
<?php

namespace App\Http\Controllers\Api;

use App\Http\Controllers\Controller;
use App\Http\Requests\TourSearchRequest;
use App\Services\TourSearchService;
use Illuminate\Http\JsonResponse;

class TourController extends Controller
{
    public function __construct(
        private TourSearchService $tourSearchService
    ) {}

    public function search(TourSearchRequest $request): JsonResponse
    {
        $tours = $this->tourSearchService->search($request->validated());
        
        return response()->json([
            'data' => $tours,
            'meta' => [
                'total' => $tours->total(),
                'per_page' => $tours->perPage(),
            ]
        ]);
    }
}
```

#### Form Request
```php
<?php

namespace App\Http\Requests;

use Illuminate\Foundation\Http\FormRequest;

class TourSearchRequest extends FormRequest
{
    public function authorize(): bool
    {
        return true;
    }

    public function rules(): array
    {
        return [
            'departure_city' => 'required|string|max:255',
            'destination_country' => 'required|string|max:255',
            'start_date' => 'required|date|after:today',
            'end_date' => 'required|date|after:start_date',
            'adults' => 'required|integer|min:1|max:10',
            'children' => 'integer|min:0|max:10',
            'hotel_stars' => 'integer|min:1|max:5',
            'meal_type' => 'string|in:BB,HB,FB,AI,UAI',
            'price_min' => 'numeric|min:0',
            'price_max' => 'numeric|min:0|gte:price_min',
        ];
    }

    public function messages(): array
    {
        return [
            'start_date.after' => '–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –≤ –±—É–¥—É—â–µ–º',
            'end_date.after' => '–î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ø–æ—Å–ª–µ –¥–∞—Ç—ã –Ω–∞—á–∞–ª–∞',
        ];
    }
}
```

## üóÑ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### –ú–∏–≥—Ä–∞—Ü–∏–∏
- –ò—Å–ø–æ–ª—å–∑—É–π –æ–ø–∏—Å–∞—Ç–µ–ª—å–Ω—ã–µ –∏–º–µ–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏–π
- –î–æ–±–∞–≤–ª—è–π –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –ø–æ–ª–µ–π
- –ò—Å–ø–æ–ª—å–∑—É–π foreign key constraints
- –ü—Ä–∏–º–µ–Ω—è–π soft deletes –≥–¥–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ

### –ü—Ä–∏–º–µ—Ä –º–∏–≥—Ä–∞—Ü–∏–∏
```php
<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    public function up(): void
    {
        Schema::create('tours', function (Blueprint $table) {
            $table->id();
            $table->string('title');
            $table->text('description');
            $table->decimal('price', 10, 2);
            $table->string('departure_city');
            $table->string('destination_country');
            $table->date('start_date');
            $table->date('end_date');
            $table->integer('hotel_stars')->nullable();
            $table->enum('meal_type', ['BB', 'HB', 'FB', 'AI', 'UAI'])->nullable();
            $table->boolean('is_active')->default(true);
            $table->timestamps();
            
            $table->index(['departure_city', 'destination_country']);
            $table->index(['start_date', 'end_date']);
            $table->index('price');
        });
    }

    public function down(): void
    {
        Schema::dropIfExists('tours');
    }
};
```

### Eloquent –æ—Ç–Ω–æ—à–µ–Ω–∏—è
- –ò—Å–ø–æ–ª—å–∑—É–π –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Ç–∏–ø—ã –æ—Ç–Ω–æ—à–µ–Ω–∏–π
- –ü—Ä–∏–º–µ–Ω—è–π eager loading –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- –ò—Å–ø–æ–ª—å–∑—É–π accessors –∏ mutators
- –ü—Ä–∏–º–µ–Ω—è–π scopes –¥–ª—è —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

## üé® Frontend (Blade)

### Blade —à–∞–±–ª–æ–Ω—ã
- –ò—Å–ø–æ–ª—å–∑—É–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–ª—è –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤
- –ü—Ä–∏–º–µ–Ω—è–π layouts –¥–ª—è –æ–±—â–µ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- –ò—Å–ø–æ–ª—å–∑—É–π includes –¥–ª—è –ø–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è –±–ª–æ–∫–æ–≤
- –ü—Ä–∏–º–µ–Ω—è–π –¥–∏—Ä–µ–∫—Ç–∏–≤—ã Blade –¥–ª—è –ª–æ–≥–∏–∫–∏

### –ü—Ä–∏–º–µ—Ä –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
```blade
{{-- resources/views/components/tour-card.blade.php --}}
@props(['tour'])

<div class="tour-card bg-white rounded-lg shadow-md overflow-hidden">
    <img src="{{ $tour->image_url }}" alt="{{ $tour->title }}" class="w-full h-48 object-cover">
    
    <div class="p-4">
        <h3 class="text-lg font-semibold mb-2">{{ $tour->title }}</h3>
        <p class="text-gray-600 text-sm mb-3">{{ Str::limit($tour->description, 100) }}</p>
        
        <div class="flex justify-between items-center">
            <span class="text-2xl font-bold text-blue-600">{{ number_format($tour->price) }} ‚ÇΩ</span>
            <button class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">
                –ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å
            </button>
        </div>
    </div>
</div>
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
```blade
@foreach($tours as $tour)
    <x-tour-card :tour="$tour" />
@endforeach
```

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –í–∞–ª–∏–¥–∞—Ü–∏—è
- –í—Å–µ–≥–¥–∞ –≤–∞–ª–∏–¥–∏—Ä—É–π –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- –ò—Å–ø–æ–ª—å–∑—É–π Form Requests
- –ü—Ä–∏–º–µ–Ω—è–π sanitization
- –ò—Å–ø–æ–ª—å–∑—É–π prepared statements

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- –ò—Å–ø–æ–ª—å–∑—É–π Laravel Sanctum –¥–ª—è API
- –ü—Ä–∏–º–µ–Ω—è–π middleware –¥–ª—è –∑–∞—â–∏—Ç—ã –º–∞—Ä—à—Ä—É—Ç–æ–≤
- –ò—Å–ø–æ–ª—å–∑—É–π rate limiting
- –ü—Ä–∏–º–µ–Ω—è–π CSRF –∑–∞—â–∏—Ç—É

### –ü—Ä–∏–º–µ—Ä middleware
```php
<?php

namespace App\Http\Middleware;

use Closure;
use Illuminate\Http\Request;

class CheckUserRole
{
    public function handle(Request $request, Closure $next, string $role): mixed
    {
        if (!$request->user() || !$request->user()->hasRole($role)) {
            abort(403, '–î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â–µ–Ω');
        }

        return $next($request);
    }
}
```

## ‚ö° –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
- –ò—Å–ø–æ–ª—å–∑—É–π –∫—ç—à –¥–ª—è —á–∞—Å—Ç–æ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –ü—Ä–∏–º–µ–Ω—è–π query caching
- –ò—Å–ø–æ–ª—å–∑—É–π view caching
- –ü—Ä–∏–º–µ–Ω—è–π route caching

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤
- –ò—Å–ø–æ–ª—å–∑—É–π eager loading
- –ü—Ä–∏–º–µ–Ω—è–π lazy loading –≥–¥–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ
- –ò—Å–ø–æ–ª—å–∑—É–π database indexes
- –ü—Ä–∏–º–µ–Ω—è–π pagination

### –ü—Ä–∏–º–µ—Ä –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
```php
// –ü–ª–æ—Ö–æ - N+1 –ø—Ä–æ–±–ª–µ–º–∞
$tours = Tour::all();
foreach ($tours as $tour) {
    echo $tour->bookings->count();
}

// –•–æ—Ä–æ—à–æ - eager loading
$tours = Tour::with('bookings')->get();
foreach ($tours as $tour) {
    echo $tour->bookings->count();
}
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### Unit —Ç–µ—Å—Ç—ã
- –¢–µ—Å—Ç–∏—Ä—É–π –º–æ–¥–µ–ª–∏ –∏ —Å–µ—Ä–≤–∏—Å—ã
- –ò—Å–ø–æ–ª—å–∑—É–π factories –¥–ª—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –ü—Ä–∏–º–µ–Ω—è–π assertions
- –¢–µ—Å—Ç–∏—Ä—É–π edge cases

### Feature —Ç–µ—Å—Ç—ã
- –¢–µ—Å—Ç–∏—Ä—É–π API endpoints
- –¢–µ—Å—Ç–∏—Ä—É–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏
- –ò—Å–ø–æ–ª—å–∑—É–π database transactions
- –ü—Ä–∏–º–µ–Ω—è–π authentication –≤ —Ç–µ—Å—Ç–∞—Ö

### –ü—Ä–∏–º–µ—Ä —Ç–µ—Å—Ç–∞
```php
<?php

namespace Tests\Feature;

use App\Models\User;
use App\Models\Tour;
use Illuminate\Foundation\Testing\RefreshDatabase;
use Tests\TestCase;

class TourSearchTest extends TestCase
{
    use RefreshDatabase;

    public function test_can_search_tours(): void
    {
        Tour::factory()->create([
            'departure_city' => '–ú–æ—Å–∫–≤–∞',
            'destination_country' => '–¢—É—Ä—Ü–∏—è',
            'price' => 50000,
        ]);

        $response = $this->getJson('/api/tours/search?' . http_build_query([
            'departure_city' => '–ú–æ—Å–∫–≤–∞',
            'destination_country' => '–¢—É—Ä—Ü–∏—è',
            'start_date' => '2024-06-01',
            'end_date' => '2024-06-08',
            'adults' => 2,
        ]));

        $response->assertStatus(200)
            ->assertJsonStructure([
                'data' => [
                    '*' => [
                        'id',
                        'title',
                        'price',
                        'departure_city',
                        'destination_country',
                    ]
                ]
            ]);
    }
}
```

## üì± –ú–æ–±–∏–ª—å–Ω–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è

### Responsive –¥–∏–∑–∞–π–Ω
- –ò—Å–ø–æ–ª—å–∑—É–π Bootstrap grid system
- –ü—Ä–∏–º–µ–Ω—è–π TailwindCSS responsive utilities
- –¢–µ—Å—Ç–∏—Ä—É–π –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
- –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è

### Touch-friendly –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- –ò—Å–ø–æ–ª—å–∑—É–π –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –±–æ–ª—å—à–∏–µ –∫–Ω–æ–ø–∫–∏
- –ü—Ä–∏–º–µ–Ω—è–π swipe –∂–µ—Å—Ç—ã
- –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π —Ñ–æ—Ä–º—ã –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö
- –ò—Å–ø–æ–ª—å–∑—É–π –º–æ–±–∏–ª—å–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –Ω–∞–≤–∏–≥–∞—Ü–∏–∏

## üîç SEO –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

### Meta —Ç–µ–≥–∏
- –ò—Å–ø–æ–ª—å–∑—É–π —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ title –∏ description
- –ü—Ä–∏–º–µ–Ω—è–π Open Graph —Ç–µ–≥–∏
- –ò—Å–ø–æ–ª—å–∑—É–π Schema.org —Ä–∞–∑–º–µ—Ç–∫—É
- –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π URL —Å—Ç—Ä—É–∫—Ç—É—Ä—É

### –ü—Ä–∏–º–µ—Ä SEO –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
```blade
@section('title', $tour->title . ' - –¢—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–æ–µ –∞–≥–µ–Ω—Ç—Å—Ç–≤–æ –ê–≤–∏–ª–æ–Ω–∞')
@section('description', Str::limit($tour->description, 160))

@section('meta')
    <meta property="og:title" content="{{ $tour->title }}">
    <meta property="og:description" content="{{ Str::limit($tour->description, 160) }}">
    <meta property="og:image" content="{{ $tour->image_url }}">
    <meta property="og:type" content="product">
@endsection
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- –ò—Å–ø–æ–ª—å–∑—É–π Laravel Log facade
- –ü—Ä–∏–º–µ–Ω—è–π —Ä–∞–∑–Ω—ã–µ —É—Ä–æ–≤–Ω–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
- –õ–æ–≥–∏—Ä—É–π –≤–∞–∂–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è
- –ò—Å–ø–æ–ª—å–∑—É–π structured logging

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- –ù–∞—Å—Ç—Ä–æ–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –æ—à–∏–±–æ–∫
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- –ú–æ–Ω–∏—Ç–æ—Ä—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
- –ù–∞—Å—Ç—Ä–æ–π –∞–ª–µ—Ä—Ç—ã

## üöÄ –î–µ–ø–ª–æ–π

### –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É
- –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
- –ù–∞—Å—Ç—Ä–æ–π –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
- –ò—Å–ø–æ–ª—å–∑—É–π environment variables
- –ù–∞—Å—Ç—Ä–æ–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
```bash
php artisan config:cache
php artisan route:cache
php artisan view:cache
php artisan optimize
```